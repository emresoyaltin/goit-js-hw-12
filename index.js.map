{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nexport async function getImagesByQuery(query, page) {\n    const API_KEY = \"50859517-961673cab883b3cd43a6fc51d\";\n    const perPage = 15;\n    try {\n        const result = await axios.get(\"https://pixabay.com/api/\", {\n            params: {\n                key: API_KEY,\n                q: query,\n                page: `${page}`,\n                per_page: `${perPage}`,\n                image_type: \"photo\",\n                orientation: \"horizontal\",\n                safesearch: true\n            }\n        });\n        return result.data;\n    } catch (error) {\n        console.log(error.message);\n    }\n}","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nexport function createGallery(images) {\n    const galleryList = document.querySelector(\".gallery\");\n    \n    const galleryMarkup = images.map(({ largeImageURL, webformatURL, tags, likes, views, comments, downloads }) => \n        `<li class=\"list-item\">\n            <div class=\"card\">\n                <a class=\"card-link\" href=\"${largeImageURL}\">\n                    <img class=\"card-img\" src=\"${webformatURL}\" alt=\"${tags}\" />\n                </a>\n                    <div class=\"card-info\">\n                        <ul class=\"card-list\">\n                            <li class=\"card-list-info\">\n                                <h2 class=\"card-info-title\">Likes</h2>\n                                <p class=\"card-info-text\">${likes}</p>\n                            </li>\n                            <li class=\"card-list-info\">\n                                <h2 class=\"card-info-title\">Views</h2>\n                                <p class=\"card-info-text\">${views}</p>\n                            </li>\n                            <li class=\"card-list-info\">\n                                <h2 class=\"card-info-title\">Comments</h2>\n                                <p class=\"card-info-text\">${comments}</p>\n                            </li>\n                            <li class=\"card-list-info\">\n                                <h2 class=\"card-info-title\">Downloads</h2>\n                                <p class=\"card-info-text\">${downloads}</p>\n                            </li>\n                        </ul>\n                    </div>\n            </div>\n        </li>`\n    ).join(\"\");\n\n    galleryList.innerHTML = galleryMarkup;\n    lightboxModal();\n\n}\n\nlet galleryModal = null;\n\nexport function lightboxModal() {\n    if (galleryModal) {\n        return galleryModal.refresh();\n    } else {\n        galleryModal = new SimpleLightbox(`.gallery a`, {\n            captionsData: \"alt\",\n            captionDelay: 250,\n        })\n    }\n}\n\nexport function addGallery(images) {\n    const galleryList = document.querySelector(\".gallery\");\n    \n    const galleryMarkup = images.map(({ largeImageURL, webformatURL, tags, likes, views, comments, downloads }) => \n        `<li class=\"list-item\">\n            <div class=\"card\">\n                <a class=\"card-link\" href=\"${largeImageURL}\">\n                    <img class=\"card-img\" src=\"${webformatURL}\" alt=\"${tags}\" />\n                </a>\n                    <div class=\"card-info\">\n                        <ul class=\"card-list\">\n                            <li class=\"card-list-info\">\n                                <h2 class=\"card-info-title\">Likes</h2>\n                                <p class=\"card-info-text\">${likes}</p>\n                            </li>\n                            <li class=\"card-list-info\">\n                                <h2 class=\"card-info-title\">Views</h2>\n                                <p class=\"card-info-text\">${views}</p>\n                            </li>\n                            <li class=\"card-list-info\">\n                                <h2 class=\"card-info-title\">Comments</h2>\n                                <p class=\"card-info-text\">${comments}</p>\n                            </li>\n                            <li class=\"card-list-info\">\n                                <h2 class=\"card-info-title\">Downloads</h2>\n                                <p class=\"card-info-text\">${downloads}</p>\n                            </li>\n                        </ul>\n                    </div>\n            </div>\n        </li>`\n    ).join(\"\");\n\n    galleryList.insertAdjacentHTML(\"beforeend\", galleryMarkup);\n    lightboxModal();\n}\n\n\n\nexport function clearGallery() {\n    const gallery = document.querySelector(\".gallery\");\n    gallery.innerHTML = \"\";\n};\n\nexport function showLoader() {\n    const loader = document.querySelector(\".loader\");\n    loader.classList.remove(\"hidden\");\n};\n\nexport function hideLoader() {\n    const loader = document.querySelector(\".loader\");\n    loader.classList.add(\"hidden\");\n}\n\nexport function showLoadMoreButton() {\n    const loadMoreBtn = document.querySelector(\".load-button\");\n    loadMoreBtn.classList.remove(\"hidden\");\n}\n\nexport function hideLoadMoreButton() {\n    const loadMoreBtn = document.querySelector(\".load-button\");\n    loadMoreBtn.classList.add(\"hidden\");\n}\n","import { getImagesByQuery } from \"./js/pixabay-api\";\nimport { createGallery, clearGallery, showLoader, hideLoader, showLoadMoreButton, hideLoadMoreButton, addGallery } from \"./js/render-functions\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst searchForm = document.querySelector(\".form\");\nconst searchInput = document.querySelector(\"input\");\nconst loadMoreBtn = document.querySelector(\".load-button\");\n\n\nlet query = \"\";\nlet page = 1;\nconst perPage = 15;\n\n\nsearchForm.addEventListener(\"submit\", handleSubmit);\n\nasync function handleSubmit(event) {\n    event.preventDefault();\n\n    query = searchInput.value.trim();\n\n    if (!query) {\n        iziToast.warning({\n            message: \"Sorry, fill in the search query to start work\",\n            position: \"topRight\"\n        });\n        return;\n    }\n\n    showLoader();\n    clearGallery();\n    hideLoadMoreButton();\n\n    try {\n        page = 1;\n        \n        const data = await getImagesByQuery(query, page);\n\n        if (data.hits.length === 0) {\n            return iziToast.show({\n                message: \"Sorry, there are no images matching your search query. Please try again!\",\n                color: \"red\",\n                position: \"topRight\"\n            })\n        };\n\n        createGallery(data.hits);\n\n        \n        if (page * perPage < data.totalHits) {\n            showLoadMoreButton();\n        } else {\n            hideLoadMoreButton();\n        };\n\n    } catch(error) {\n        console.log(error.message);\n        iziToast.show({\n            message: `Error:${error.message}`,\n            color: \"red\",\n            position: \"topRight\"\n        })\n    } finally {\n        hideLoader();\n    }\n};\n\nloadMoreBtn.addEventListener(\"click\", loadMoreCards);\n\nasync function loadMoreCards() {\n    showLoader();\n    page += 1;\n\n    try {\n        const data = await getImagesByQuery(query, page);\n\n        if (!data.hits || data.hits.length === 0) {\n            iziToast.show({\n                message: \"Sorry, there are no images matching your search query. Please try again!\",\n                color: \"red\",\n                position: \"topRight\"\n            })\n            hideLoadMoreButton();\n            return;\n        }\n        \n        const loadedCards = page * 15;\n        if (loadedCards >= data.totalHits) {\n            hideLoadMoreButton();\n            iziToast.show({\n                message: \"We're sorry, but you've reached the end of search results.\",\n                color: \"blue\",\n                position: \"topRight\"\n            })\n        }\n\n        addGallery(data.hits);\n\n        const gallery = document.querySelector(\".gallery\");\n        const cardHeight = gallery.firstElementChild.getBoundingClientRect().height;\n        \n        window.scrollBy({\n            top: cardHeight*2,\n            left: 0,\n            behavior: \"smooth\"\n        });\n\n    } catch(error) {\n        console.log(error.message);\n    } finally {\n        hideLoader();\n    }\n}\n\n"],"names":["getImagesByQuery","query","page","API_KEY","axios","error","createGallery","images","galleryList","galleryMarkup","largeImageURL","webformatURL","tags","likes","views","comments","downloads","lightboxModal","galleryModal","SimpleLightbox","addGallery","clearGallery","gallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","searchForm","searchInput","loadMoreBtn","perPage","handleSubmit","event","iziToast","data","loadMoreCards","cardHeight"],"mappings":"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"}